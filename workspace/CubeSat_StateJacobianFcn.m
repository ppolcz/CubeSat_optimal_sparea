function [A,B] = CubeSat_StateJacobianFcn(x,u,lambdaStar)
% 
%  File: CubeSat_StateJacobianFcn.m
%  Directory: 1_PhD_projects/98_CubeSat/CubeSat_MPC
%  Author: Peter Polcz (ppolcz@gmail.com) 
% 
%  Created on 2019. December 21. (2019b)

lambda = u(2,:);
rho1 = u(3,:);
rho2 = u(4,:);
rho4 = u(5,:);
x1 = x(1,:);
x2 = x(2,:);
x3 = x(3,:);
x4 = x(4,:);
x5 = x(5,:);
x6 = x(6,:);
x7 = x(7,:);
t2 = x1.^3;
t3 = x2.^3;
t4 = x3.^3;
t5 = x4.^3;
t6 = x5.^3;
t7 = x6.^3;
t8 = x7.^3;
t9 = lambdaStar.*(5.27e+2./1.0e+2);
t10 = t9+1.96e+2./5.0;
t12 = t8.*1.330479591836735e-11;
t11 = 1.0./t10;
t13 = t8.*t11.*5.21548e-10;
A = reshape([-t11.*(t2.*2.60774e-9-lambda.*t2.*1.587320000000001e-10),0.0,0.0,0.0,0.0,0.0,t2.*9.997354730623403e-12,0.0,-t11.*(t3.*2.60774e-9-lambda.*t3.*1.587320000000001e-10),0.0,0.0,0.0,0.0,t3.*9.997354730623403e-12,0.0,0.0,t4.*(-6.652397959183673e-11),0.0,0.0,0.0,t4.*9.997354730623403e-12,0.0,0.0,0.0,-t11.*(t5.*2.60774e-9-lambda.*t5.*1.587320000000001e-10),0.0,0.0,t5.*9.997354730623403e-12,0.0,0.0,0.0,0.0,t6.*(-6.652397959183673e-11),0.0,t6.*9.997354730623403e-12,0.0,0.0,0.0,0.0,0.0,t7.*(-6.652397959183673e-11),t7.*9.997354730623403e-12,t13,t13,t12,t13,t12,t12,t8.*(-5.998412838374042e-11)],[7,7]);
if nargout > 1
    B = reshape([0.0,0.0,0.0,0.0,0.0,0.0,1.916861867100133e-2,t11.*(rho1.*1.13461e+1+x1.^4.*3.968300000000003e-11),t11.*(rho2.*1.13461e+1+x2.^4.*3.968300000000003e-11),0.0,t11.*(rho4.*1.13461e+1+x4.^4.*3.968300000000003e-11),0.0,0.0,0.0],[7,2]);
end
